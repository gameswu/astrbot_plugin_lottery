# AstrBot æŠ½å¥–æ’ä»¶

![](https://count.getloli.com/@lottery?name=lottery&theme=booru-jaypee&padding=7&offset=0&align=top&scale=1&pixelated=1&darkmode=auto)

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ AstrBot æŠ½å¥–æ’ä»¶ï¼Œæ”¯æŒå¤šç§æŠ½å¥–ç®—æ³•å’Œçµæ´»çš„é…ç½®é€‰é¡¹ã€‚

> [!NOTE]
> 
> ä»…æ”¯æŒ aiocqhttp åè®®ä¸‹ä½¿ç”¨ã€‚

## âœ¨åŠŸèƒ½ç‰¹æ€§

- ğŸ² çµæ´»çš„è‡ªå®šä¹‰é…ç½®åˆ›å»ºé€‰é¡¹
- ğŸ¯ æ”¯æŒå¤šç§æŠ½å¥–ç®—æ³•
- ğŸ“‰ å®Œæ•´çš„ç»Ÿè®¡ç®¡ç†ä¿¡æ¯

## ğŸ“¦ä½¿ç”¨æ–¹æ³•

### å®‰è£…

1. åœ¨ AstrBot æ’ä»¶å¸‚åœºä¸­ç›´æ¥è·å–å®‰è£…
2. å°†è¯¥ä»“åº“æ”¾ç½®åœ¨ AstrBot çš„æ’ä»¶ç›®å½•ä¸‹

### åŸºæœ¬å‘½ä»¤

| å‘½ä»¤ | å‚æ•° | æè¿° |
| ---- | ---- | ---- |
| `/æŠ½å¥–(lottery) åˆ›å»º(create)` | - | åˆ›å»ºæ–°çš„æŠ½å¥–(éœ€è¦opæƒé™) |
| `/æŠ½å¥–(lottery) åˆ—è¡¨(list)` | - | åˆ—å‡ºæ‰€æœ‰æŠ½å¥– |
| `/æŠ½å¥–(lottery) å‚ä¸(participate)` | `[æŠ½å¥–åç§°]` | å‚ä¸æŒ‡å®šçš„æŠ½å¥– |

### åˆ›å»ºæŠ½å¥–

åœ¨ä½¿ç”¨æŒ‡ä»¤åˆ›å»ºæŠ½å¥–åï¼Œæœºå™¨äººä¼šå‘é€ä¸€ä¸ªæ¨¡æ¿æ¶ˆæ¯ï¼Œç”¨æˆ·æŒ‰ç…§æ¨¡æ¿æ¶ˆæ¯å¡«å†™åå†å‘é€ç»™æœºå™¨äººæ‰å¯ä»¥æˆåŠŸåˆ›å»ºæŠ½å¥–ã€‚

![](docs/create_template.png)

å®Œæ•´çš„æ¨¡æ¿æ¶ˆæ¯æ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "name": "",
  "description": "",
  "start_time": "2025-01-01T00:00:00Z",
  "end_time": "2025-12-31T23:59:59Z",
  "allowed_groups": [],
  "participation_limits": {
    "max_total_participants": 1000,
    "max_attempts_per_user": 3,
    "max_wins_per_user": 1
  },
  "probability_settings": {
    "probability_mode": "exhaust",
    "base_probability": 0.2
  },
  "prizes": [
    {
      "name": "",
      "description": "",
      "image_url": "",
      "weight": 1,
      "quantity": 2,
      "max_win_per_user": 1
    }
  ]
}
```

å„é¡¹å­—æ®µè¯´æ˜ï¼š
- `name`: æŠ½å¥–åç§°
- `description`: æŠ½å¥–æè¿°
- `start_time`: æŠ½å¥–å¼€å§‹æ—¶é—´ï¼ŒISO 8601 æ ¼å¼
- `end_time`: æŠ½å¥–ç»“æŸæ—¶é—´ï¼ŒISO 8601 æ ¼å¼
- `allowed_groups`: å…è®¸å‚ä¸çš„ç¾¤ç»„åˆ—è¡¨ï¼Œæ¯ä¸€é¡¹ä¸ºstringç±»å‹çš„ç¾¤å·
- `participation_limits`: å‚ä¸é™åˆ¶è®¾ç½®
  - `max_total_participants`: æœ€å¤§å‚ä¸äººæ•°
  - `max_attempts_per_user`: æ¯ä¸ªç”¨æˆ·æœ€å¤§å‚ä¸æ¬¡æ•°
  - `max_wins_per_user`: æ¯ä¸ªç”¨æˆ·æœ€å¤§ä¸­å¥–æ¬¡æ•°
- `probability_settings`: æ¦‚ç‡è®¾ç½®
  - `probability_mode`: æ¦‚ç‡æ¨¡å¼ï¼Œæ”¯æŒ "exhaust"ï¼ˆç”¨å°½é‡æŠ½å®Œï¼‰å’Œ "fixed"ï¼ˆå›ºå®šæ¦‚ç‡ï¼‰
  - `base_probability`: åŸºç¡€ä¸­å¥–æ¦‚ç‡ï¼Œ0-1ä¹‹é—´çš„æµ®ç‚¹æ•°
- `prizes`: å¥–å“åˆ—è¡¨
  - `name`: å¥–å“åç§°
  - `description`: å¥–å“æè¿°
  - `image_url`: å¥–å“å›¾ç‰‡é“¾æ¥
  - `weight`: å¥–å“æƒé‡ï¼Œæ•´æ•°ï¼Œæƒé‡è¶Šé«˜ä¸­å¥–æ¦‚ç‡è¶Šå¤§
  - `quantity`: å¥–å“æ•°é‡ï¼Œæ•´æ•°
  - `max_win_per_user`: æ¯ä¸ªç”¨æˆ·æœ€å¤§ä¸­å¥–æ¬¡æ•°

æœ‰å…³äºæŠ½å¥–ç®—æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ [æŠ½å¥–ç®—æ³•æ–‡æ¡£](docs/ALGORITHMS.md)ã€‚

### æ¶ˆæ¯å¹¿æ’­

å½“æœ‰ä»»ä¸€ç©å®¶æŠ½ä¸­å¥–å“åï¼Œæœºå™¨äººä¼šè‡ªåŠ¨å‘é€ä¸­å¥–é€šçŸ¥æ¶ˆæ¯åˆ°æ‰€æœ‰å‚ä¸æŠ½å¥–çš„ç¾¤ç»„ã€‚

## ğŸ§¾æ›´æ–°æ—¥å¿—

å‚è§ [CHANGELOG](docs/CHANGELOG.md)ã€‚